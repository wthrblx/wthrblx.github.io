import{af as m,ag as B,O as S,z as Y,x as E,w as I,m as A,k as x,A as q,ah as F,p as y,t as C,S as H,ai as U,Z as k,H as z,Q as K,P as Z,a0 as w,aj as $,h as j,a as D,q as G,ak as L,al as Q,am as J,an as V,g as P,ao as W,ap as X,o as ee,aq as se,ar as re,l as te,as as ae,at as ie,ad as ne,au as fe,av as ue,aw as ce,ax as de}from"./C-jjKaen.js";class he{anchor;#s=new Map;#r=new Map;#e=new Map;#t=new Set;#a=!0;constructor(e,t=!0){this.anchor=e,this.#a=t}#i=()=>{var e=m;if(this.#s.has(e)){var t=this.#s.get(e),i=this.#r.get(t);if(i)B(i),this.#t.delete(t);else{var a=this.#e.get(t);a&&(this.#r.set(t,a.effect),this.#e.delete(t),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),i=a.effect)}for(const[r,f]of this.#s){if(this.#s.delete(r),r===e)break;const n=this.#e.get(f);n&&(S(n.effect),this.#e.delete(f))}for(const[r,f]of this.#r){if(r===t||this.#t.has(r))continue;const n=()=>{if(Array.from(this.#s.values()).includes(r)){var d=document.createDocumentFragment();q(f,d),d.append(E()),this.#e.set(r,{effect:f,fragment:d})}else S(f);this.#t.delete(r),this.#r.delete(r)};this.#a||!i?(this.#t.add(r),Y(f,n,!1)):n()}}};#n=e=>{this.#s.delete(e);const t=Array.from(this.#s.values());for(const[i,a]of this.#e)t.includes(i)||(S(a.effect),this.#e.delete(i))};ensure(e,t){var i=m,a=F();if(t&&!this.#r.has(e)&&!this.#e.has(e))if(a){var r=document.createDocumentFragment(),f=E();r.append(f),this.#e.set(e,{effect:I(()=>t(f)),fragment:r})}else this.#r.set(e,I(()=>t(this.anchor)));if(this.#s.set(i,e),a){for(const[n,u]of this.#r)n===e?i.unskip_effect(u):i.skip_effect(u);for(const[n,u]of this.#e)n===e?i.unskip_effect(u.effect):i.skip_effect(u.effect);i.oncommit(this.#i),i.ondiscard(this.#n)}else A&&(this.anchor=x),this.#i()}}function ve(s,e,t=!1){var i;A&&(i=x,C());var a=new he(s),r=t?H:0;function f(n,u){if(A){var d=U(i),h;if(d===k?h=0:d===z?h=!1:h=parseInt(d.substring(1)),n!==h){var v=K();Z(v),a.anchor=v,w(!1),a.ensure(n,u),w(!0);return}}a.ensure(n,u)}y(()=>{var n=!1;e((u,d=0)=>{n=!0,f(d,u)}),n||f(!1,null)},r)}function O(s,e){return s===e||s?.[L]===e}function be(s={},e,t,i){return $(()=>{var a,r;return j(()=>{a=r,r=[],D(()=>{s!==t(...r)&&(e(s,...r),a&&O(t(...a),s)&&e(null,...a))})}),()=>{G(()=>{r&&O(t(...r),s)&&e(null,...r)})}}),s}let p=!1;function oe(s){var e=p;try{return p=!1,[s(),p]}finally{p=e}}const le={get(s,e){if(!s.exclude.includes(e))return s.props[e]},set(s,e){return!1},getOwnPropertyDescriptor(s,e){if(!s.exclude.includes(e)&&e in s.props)return{enumerable:!0,configurable:!0,value:s.props[e]}},has(s,e){return s.exclude.includes(e)?!1:e in s.props},ownKeys(s){return Reflect.ownKeys(s.props).filter(e=>!s.exclude.includes(e))}};function pe(s,e,t){return new Proxy({props:s,exclude:e},le)}function ge(s,e,t,i){var a=!te||(t&ae)!==0,r=(t&re)!==0,f=(t&ue)!==0,n=i,u=!0,d=()=>(u&&(u=!1,n=f?D(i):i),n),h;if(r){var v=L in s||de in s;h=Q(s,e)?.set??(v&&e in s?c=>s[e]=c:void 0)}var l,R=!1;r?[l,R]=oe(()=>s[e]):l=s[e],l===void 0&&i!==void 0&&(l=d(),h&&(a&&J(),h(l)));var o;if(a?o=()=>{var c=s[e];return c===void 0?d():(u=!0,c)}:o=()=>{var c=s[e];return c!==void 0&&(n=void 0),c===void 0?n:c},a&&(t&V)===0)return o;if(h){var M=s.$$legacy;return(function(c,b){return arguments.length>0?((!a||!b||M||R)&&h(b?o():c),c):o()})}var g=!1,_=((t&ie)!==0?ne:fe)(()=>(g=!1,o()));r&&P(_);var N=ee;return(function(c,b){if(arguments.length>0){const T=b?P(_):a&&r?W(c):c;return X(_,T),g=!0,n!==void 0&&(n=T),c}return ce&&g||(N.f&se)!==0?_.v:P(_)})}export{he as B,be as b,ve as i,ge as p,pe as r};
